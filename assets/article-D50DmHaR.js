import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */import{b as T}from"./blog-posts-C_u72z4H.js";async function L(n){try{const t=await(await fetch("/data/python-highlight-keywords.json")).json(),s=new Set,a=new Map;Object.values(t).forEach(e=>{e.methods.forEach(l=>s.add(l)),e.aliases.forEach(l=>{a.set(l,e.package)})});let i=n.innerHTML;const d=document.createElement("div");d.innerHTML=i;const g=document.createTreeWalker(d,NodeFilter.SHOW_TEXT,null,!1),b=[];let r;for(;r=g.nextNode();)b.push(r);const u=new Set(["self","cls","obj","instance","this"]);b.forEach(e=>{const l=e.textContent,f=/(\w+(?:\.\w+)+)/g;let c;const p=[];for(;(c=f.exec(l))!==null;){const h=c[1],m=h.split("."),w=m[0];if(a.has(w)||u.has(w)||m.some(y=>s.has(y))){let y=w;for(let k=1;k<m.length;k++)y+=`.<span class="hljs-custom-method">${m[k]}</span>`;p.push({index:c.index,length:h.length,original:h,highlighted:y})}}if(p.length>0){let h=l;p.reverse().forEach(w=>{const v=h.substring(0,w.index),y=h.substring(w.index+w.length);h=v+w.highlighted+y});const m=document.createElement("span");m.innerHTML=h,e.parentNode.replaceChild(m,e)}}),n.innerHTML=d.innerHTML}catch(o){console.error("Error enhancing Python highlighting:",o)}}function H(n){return new URLSearchParams(window.location.search).get(n)}function M(n){const o=new Date(n),t={year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",t)}function x(n){const o=document.getElementById("article-header"),t=M(n.date);o.innerHTML=`
    <h1 class="article-title">${n.title}</h1>
    <div class="article-meta">
      <div class="article-author">
        <div class="article-author__name">${n.author.name}</div>
      </div>
      <span>${t}</span>
      <span>${n.readingTime} min read</span>
    </div>
  `,document.title=`${n.title} - Chen Hao`}async function C(n){try{let g=function(r){const u=r.textContent,e=u.split(`
`);e[e.length-1].trim()===""&&e.pop();const l=e.map((h,m)=>m+1).join(`
`),f=r.parentElement,c=document.createElement("div");c.className="code-block-wrapper";const p=document.createElement("pre");p.className="line-numbers",p.setAttribute("aria-hidden","true"),p.textContent=l,f.parentNode.insertBefore(c,f),c.appendChild(p),c.appendChild(f),b(c,u)},b=function(r,u){const e=document.createElement("button");e.className="copy-button",e.setAttribute("aria-label","Copy code to clipboard");const l=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.5 2.5h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3.5 5.5h-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1v-1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`,f=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`;e.innerHTML=l,e.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(u),e.innerHTML=f,e.classList.add("copied"),setTimeout(()=>{e.innerHTML=l,e.classList.remove("copied")},2e3)}catch(c){console.error("Failed to copy code:",c)}}),r.appendChild(e)};const o=await fetch(`/blog/${n}`);if(!o.ok)throw new Error("Article not found");let t=await o.text();if(console.log("Original markdown length:",t.length),t.startsWith("---")){const r=t.indexOf("---",3);r!==-1&&(t=t.substring(r+3).trim(),console.log("After frontmatter removal:",t.substring(0,100)))}t=t.replace(/^#\s+.+$/m,"").trim();let s=0;for(;!window.markdownit&&s<50;)await new Promise(r=>setTimeout(r,100)),s++;if(!window.markdownit)throw console.error("markdown-it library failed to load"),new Error("Markdown parser not available");console.log("markdown-it is available:",typeof window.markdownit);const i=window.markdownit({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(window.markdownitFootnote).render(t);console.log("HTML content length:",i.length),console.log("HTML preview:",i.substring(0,200));const d=document.getElementById("article-content");d.innerHTML=i,setTimeout(async()=>{if(window.hljs){const r=d.querySelectorAll("pre code");r.forEach(e=>{hljs.highlightElement(e)}),r.forEach(e=>{g(e)});const u=d.querySelectorAll("pre code.language-python, pre code.python");for(const e of u)await L(e)}},100)}catch(o){console.error("Error loading article content:",o);const t=document.getElementById("article-content");t.innerHTML=`<p style="text-align: center; color: var(--color-meta);">Error loading article: ${o.message}</p>`}}async function j(n,o){try{const s=T.posts.filter(a=>a.id!==n).map(a=>({...a,sharedTags:a.tags.filter(i=>o.includes(i)).length})).filter(a=>a.sharedTags>0).sort((a,i)=>i.sharedTags-a.sharedTags).slice(0,3);if(s.length>0){const a=document.getElementById("related-articles"),i=document.getElementById("related-articles-grid"),d=s.map(g=>`
        <article class="article-card" onclick="window.location.href='article.html?id=${g.id}'" role="button" tabindex="0">
          <h3 class="article-card__title">${g.title}</h3>
          <p class="article-card__excerpt">${g.excerpt}</p>
          <div class="article-card__footer">
            <span class="article-card__reading-time">${g.readingTime} min read</span>
          </div>
        </article>
      `).join("");i.innerHTML=d,a.style.display="block"}}catch(t){console.error("Error loading related articles:",t)}}async function E(){const n=H("id");if(!n){window.location.href="blog.html";return}try{const t=T.posts.find(s=>s.id===n);if(!t)throw new Error("Article not found");x(t),await C(t.markdown),j(t.id,t.tags)}catch(o){console.error("Error loading article:",o),document.getElementById("article-header").innerHTML="<h1>Article Not Found</h1>",document.getElementById("article-content").innerHTML=`<p style="text-align: center; color: var(--color-meta);">The article you're looking for could not be found. <a href="blog.html">Return to blog</a></p>`}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
