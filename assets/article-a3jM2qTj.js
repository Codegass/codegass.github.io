import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             *//* empty css             */async function C(t){try{const e=await(await fetch("/data/python-highlight-keywords.json")).json(),c=new Set,i=new Map;Object.values(e).forEach(n=>{n.methods.forEach(m=>c.add(m)),n.aliases.forEach(m=>{i.set(m,n.package)})});let s=t.innerHTML;const r=document.createElement("div");r.innerHTML=s;const l=document.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,!1),h=[];let a;for(;a=l.nextNode();)h.push(a);const d=new Set(["self","cls","obj","instance","this"]);h.forEach(n=>{const m=n.textContent,y=/(\w+(?:\.\w+)+)/g;let u;const p=[];for(;(u=y.exec(m))!==null;){const g=u[1],f=g.split("."),w=f[0];if(i.has(w)||d.has(w)||f.some(E=>c.has(E))){let E=w;for(let k=1;k<f.length;k++)E+=`.<span class="hljs-custom-method">${f[k]}</span>`;p.push({index:u.index,length:g.length,original:g,highlighted:E})}}if(p.length>0){let g=m;p.reverse().forEach(w=>{const v=g.substring(0,w.index),E=g.substring(w.index+w.length);g=v+w.highlighted+E});const f=document.createElement("span");f.innerHTML=g,n.parentNode.replaceChild(f,n)}}),t.innerHTML=r.innerHTML}catch(o){console.error("Error enhancing Python highlighting:",o)}}let b=null;async function L(){return b||(b=await(await fetch("/data/blog-posts.json")).json(),b)}function x(t){return new URLSearchParams(window.location.search).get(t)}function H(t){const o=new Date(t),e={year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",e)}function M(t){const o=document.getElementById("article-header"),e=H(t.date);o.innerHTML=`
    <h1 class="article-title">${t.title}</h1>
    <div class="article-meta">
      <div class="article-author">
        <div class="article-author__name">${t.author.name}</div>
      </div>
      <span>${e}</span>
      <span>${t.readingTime} min read</span>
    </div>
  `,document.title=`${t.title} - Chen Hao`}async function I(t){try{let l=function(a){const d=a.textContent,n=d.split(`
`);n[n.length-1].trim()===""&&n.pop();const m=n.map((g,f)=>f+1).join(`
`),y=a.parentElement,u=document.createElement("div");u.className="code-block-wrapper";const p=document.createElement("pre");p.className="line-numbers",p.setAttribute("aria-hidden","true"),p.textContent=m,y.parentNode.insertBefore(u,y),u.appendChild(p),u.appendChild(y),h(u,d)},h=function(a,d){const n=document.createElement("button");n.className="copy-button",n.setAttribute("aria-label","Copy code to clipboard");const m=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.5 2.5h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3.5 5.5h-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1v-1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`,y=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>`;n.innerHTML=m,n.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(d),n.innerHTML=y,n.classList.add("copied"),setTimeout(()=>{n.innerHTML=m,n.classList.remove("copied")},2e3)}catch(u){console.error("Failed to copy code:",u)}}),a.appendChild(n)};const o=await fetch(`/blog/${t}`);if(!o.ok)throw new Error("Article not found");let e=await o.text();if(console.log("Original markdown length:",e.length),e.startsWith("---")){const a=e.indexOf("---",3);a!==-1&&(e=e.substring(a+3).trim(),console.log("After frontmatter removal:",e.substring(0,100)))}e=e.replace(/^#\s+.+$/m,"").trim();let c=0;for(;!window.markdownit&&c<50;)await new Promise(a=>setTimeout(a,100)),c++;if(!window.markdownit)throw console.error("markdown-it library failed to load"),new Error("Markdown parser not available");console.log("markdown-it is available:",typeof window.markdownit);const s=window.markdownit({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(window.markdownitFootnote).render(e);console.log("HTML content length:",s.length),console.log("HTML preview:",s.substring(0,200));const r=document.getElementById("article-content");r.innerHTML=s,S(),B(r),setTimeout(async()=>{if(window.hljs){const a=r.querySelectorAll("pre code");a.forEach(n=>{hljs.highlightElement(n)}),a.forEach(n=>{l(n)});const d=r.querySelectorAll("pre code.language-python, pre code.python");for(const n of d)await C(n)}},100)}catch(o){console.error("Error loading article content:",o);const e=document.getElementById("article-content");e.innerHTML=`<p style="text-align: center; color: var(--color-meta);">Error loading article: ${o.message}</p>`}}function S(){const t=document.getElementById("left-toc"),o=document.getElementById("article-content");if(console.log("Generating TOC..."),console.log("TOC nav element:",t),console.log("Article element:",o),!t||!o){console.warn("TOC or article element not found");return}const e=Array.from(o.querySelectorAll("h2"));if(console.log("Found headings:",e.length,e),!e.length){console.warn("No headings found, hiding TOC"),t.style.display="none";return}const c=document.createElement("ul");c.className="toc-list";const i=o.querySelector("p");if(i){i.id||(i.id="introduction");const r=document.createElement("li");r.className="toc-item";const l=document.createElement("a");l.href="#introduction",l.textContent="Introduction",r.appendChild(l),c.appendChild(r)}const s=new Set;e.forEach(r=>{if(r.id)s.add(r.id);else{let a=A(r.textContent),d=a,n=2;for(;s.has(d)||document.getElementById(d);)d=a+"-"+n++;r.id=d,s.add(d)}const l=document.createElement("li");l.className="toc-item";const h=document.createElement("a");h.href="#"+r.id,h.textContent=r.textContent,l.appendChild(h),c.appendChild(l)}),t.appendChild(c),c.querySelectorAll("a").forEach(r=>{r.addEventListener("click",l=>{l.preventDefault();const h=r.getAttribute("href").substring(1),a=document.getElementById(h);a&&a.scrollIntoView({behavior:"smooth",block:"start"})})})}function A(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function B(t){const o=t.querySelector(".footnotes");if(!o)return;const e=o.querySelectorAll(".footnotes-list li, .footnotes ol li");t.querySelectorAll(".footnote-ref").forEach((i,s)=>{const r=e[s];if(!r)return;const l=document.createElement("span");l.className="sidenote";const h=r.cloneNode(!0),a=h.querySelector(".footnote-backref");a&&a.remove(),l.innerHTML=h.innerHTML,i.parentNode.insertBefore(l,i.nextSibling),i.innerHTML='<label class="sidenote-number"></label>'}),o.style.display="none"}async function N(t,o){try{const c=(await L()).posts.filter(i=>i.id!==t).map(i=>({...i,sharedTags:i.tags.filter(s=>o.includes(s)).length})).filter(i=>i.sharedTags>0).sort((i,s)=>s.sharedTags-i.sharedTags).slice(0,3);if(c.length>0){const i=document.getElementById("related-articles"),s=document.getElementById("related-articles-grid"),r=c.map(l=>`
        <article class="article-card" onclick="window.location.href='article.html?id=${l.id}'" role="button" tabindex="0">
          <h3 class="article-card__title">${l.title}</h3>
          <p class="article-card__excerpt">${l.excerpt}</p>
          <div class="article-card__footer">
            <span class="article-card__reading-time">${l.readingTime} min read</span>
          </div>
        </article>
      `).join("");s.innerHTML=r,i.style.display="block"}}catch(e){console.error("Error loading related articles:",e)}}async function T(){const t=x("id");if(!t){window.location.href="blog.html";return}try{const e=(await L()).posts.find(c=>c.id===t);if(!e)throw new Error("Article not found");M(e),await I(e.markdown),N(e.id,e.tags)}catch(o){console.error("Error loading article:",o),document.getElementById("article-header").innerHTML="<h1>Article Not Found</h1>",document.getElementById("article-content").innerHTML=`<p style="text-align: center; color: var(--color-meta);">The article you're looking for could not be found. <a href="blog.html">Return to blog</a></p>`}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",T):T();
